{"ast":null,"code":"export const placeReducer = async (state, action) => {\n  switch (action.type) {\n    case 'SHOW_PLACES':\n      const {\n        type,\n        location,\n        columnsCount\n      } = action.search;\n      console.log(type);\n      const places = await loadPlaces(state, action.search.type, action.search.location, action.search.columnsCount);\n      console.log(places);\n      return { ...state\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst loadPlaces = async (state, type, location, columnsCount) => {\n  var columns = {};\n  var columnOrder = [];\n\n  for (var i = 0; i < columnsCount; i++) {\n    var dataObject = {};\n    dataObject['id'] = `column-${i}`;\n    dataObject['title'] = `Day ${i + 1}`;\n    dataObject['placeIds'] = [];\n    columns[`column-${i}`] = dataObject;\n    columnOrder.push(`column-${i}`);\n  }\n\n  const googlePlacesApi = process.env.REACT_APP_GOOGLE_PLACES_API_KEY;\n  const response = await fetch(`/place/textsearch/json?query=${type}+${location}&key=${googlePlacesApi}`);\n  const data = await response.json();\n  console.log(data.results);\n  var placesFetched = {};\n  var placeIds = [];\n\n  for (var j = 0; j < data.results.length; j++) {\n    //object structure of place card is set here\n    var placeObject = {};\n    placeObject['id'] = `place-${j}`;\n    placeObject['content'] = data.results[j].name;\n    placeObject['rating'] = data.results[j].rating;\n    placeObject['photoRef'] = data.results[j].photos ? data.results[j].photos[0].photo_reference : \"0\"; //console.log(placeObject);\n\n    placeIds.push(`place-${j}`);\n    placesFetched[`place-${j}`] = placeObject;\n  }\n\n  columns['data-1'] = { ...state.columns['data-1'],\n    placeIds: placeIds\n  };\n  const newState = { ...state,\n    places: placesFetched,\n    columns: { ...state.columns,\n      ...columns\n    },\n    columnOrder: [...columnOrder]\n  };\n  return newState;\n};","map":{"version":3,"sources":["/Users/wen/Desktop/Projects/React/dnd/src/Store/placeReducer.js"],"names":["placeReducer","state","action","type","location","columnsCount","search","console","log","places","loadPlaces","columns","columnOrder","i","dataObject","push","googlePlacesApi","process","env","REACT_APP_GOOGLE_PLACES_API_KEY","response","fetch","data","json","results","placesFetched","placeIds","j","length","placeObject","name","rating","photos","photo_reference","newState"],"mappings":"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","sourcesContent":["export const placeReducer = async (state, action) => {\n    switch (action.type) {\n        case 'SHOW_PLACES':\n            const {type, location, columnsCount} = action.search;\n            console.log(type);\n            const places = await loadPlaces(state, action.search.type, action.search.location, action.search.columnsCount);\n            console.log(places);\n            return {\n                ...state,\n            }\n        default:\n            return state;\n    }\n}\n\nconst loadPlaces = async (state, type, location, columnsCount) => {\n\n    var columns = {};\n    var columnOrder = [];\n\n    for (var i = 0; i < columnsCount; i++) {\n        var dataObject = {};\n        dataObject['id'] = `column-${i}`;\n        dataObject['title'] = `Day ${i + 1}`;\n        dataObject['placeIds'] = [];\n\n        columns[`column-${i}`] = dataObject;\n        columnOrder.push(`column-${i}`);\n    }\n\n    const googlePlacesApi = process.env.REACT_APP_GOOGLE_PLACES_API_KEY;\n    const response = await fetch(`/place/textsearch/json?query=${type}+${location}&key=${googlePlacesApi}`)\n    const data = await response.json();\n    console.log(data.results)\n\n    var placesFetched = {};\n    var placeIds = [];\n    \n    for (var j = 0; j < data.results.length; j++) {\n\n        //object structure of place card is set here\n\n        var placeObject = {};\n        placeObject['id'] = `place-${j}`;\n        placeObject['content'] = data.results[j].name;\n        placeObject['rating'] = data.results[j].rating;\n        placeObject['photoRef'] = data.results[j].photos ? data.results[j].photos[0].photo_reference : \"0\";\n        //console.log(placeObject);\n        placeIds.push(`place-${j}`);\n        placesFetched[`place-${j}`] = placeObject;\n    \n    }\n\n    columns['data-1'] = {\n        ...state.columns['data-1'],\n        placeIds: placeIds\n    }\n    \n    const newState = {\n        ...state,\n        places: placesFetched,\n        columns: {\n            ...state.columns,\n            ...columns,\n        },\n        columnOrder: [...columnOrder],\n    }\n\n    return newState;\n}"]},"metadata":{},"sourceType":"module"}