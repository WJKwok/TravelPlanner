{"ast":null,"code":"var _jsxFileName = \"/Users/wen/Desktop/Projects/React/dnd/src/Components/board.js\";\nimport React, { Component } from 'react';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport initialData from '../Store/initial-data';\nimport Column from './column';\n\nclass Board extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = initialData;\n\n    this.onDragEnd = result => {\n      const {\n        destination,\n        source,\n        draggableId\n      } = result;\n\n      if (!destination) {\n        return;\n      }\n\n      if (destination.droppableId === source.droppableId && destination.index === source.index) {\n        return;\n      }\n\n      const start = this.state.columns[source.droppableId];\n      const finish = this.state.columns[destination.droppableId]; //if moving within the same column\n\n      if (start === finish) {\n        const column = this.state.columns[source.droppableId];\n        const newTaskIds = Array.from(column.taskIds);\n        newTaskIds.splice(source.index, 1);\n        newTaskIds.splice(destination.index, 0, draggableId);\n        const newColumn = { ...column,\n          taskIds: newTaskIds\n        };\n        const newState = { ...this.state,\n          columns: { ...this.state.columns,\n            [newColumn.id]: newColumn\n          }\n        };\n        this.setState(newState);\n        return;\n      } //moving from one list to another\n\n\n      const startTaskIds = Array.from(start.taskIds);\n      startTaskIds.splice(source.index, 1);\n      const newStart = { ...start,\n        taskIds: startTaskIds\n      };\n      const finishTaskIds = Array.from(finish.taskIds);\n      finishTaskIds.splice(destination.index, 0, draggableId);\n      const newFinish = { ...finish,\n        taskIds: finishTaskIds\n      };\n      const newState = { ...this.state,\n        columns: { ...this.state.columns,\n          [newStart.id]: newStart,\n          [newFinish.id]: newFinish\n        }\n      };\n      this.setState(newState);\n    };\n\n    this.changeHandler = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.clickHandler = () => {\n      console.log('hello'); // https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors \n      // added proxy in package.json \"proxy\": \"https://maps.googleapis.com/maps/api\"\n\n      const googlePlacesApi = process.env.REACT_APP_GOOGLE_PLACES_API_KEY;\n      fetch(`/place/textsearch/json?query=restaurants+hamburg+germany&key=${googlePlacesApi}`).then(res => res.json()).then(data => {\n        console.log(data.results);\n        console.log(data.results[0].name);\n        var tasksFetched = {};\n        var taskIds = [];\n\n        for (var i = 0; i < data.results.length; i++) {\n          var taskObject = {};\n          taskObject['id'] = `task-${i}`;\n          taskObject['content'] = data.results[i].name;\n          console.log(taskObject);\n          taskIds.push(`task-${i}`);\n          tasksFetched[`task-${i}`] = taskObject;\n        }\n\n        const newState = { ...this.state,\n          tasks: tasksFetched,\n          columns: { ...this.state.columns,\n            'data-1': { ...this.state.columns['data-1'],\n              taskIds: taskIds\n            }\n          }\n        };\n        this.setState(newState);\n      }).catch(error => console.error(error));\n      const columnsCount = this.state.number;\n      var columns = {};\n      var columnOrder = [];\n\n      for (var i = 0; i < columnsCount; i++) {\n        var dataObject = {};\n        dataObject['id'] = `column-${i}`;\n        dataObject['title'] = `column-${i}`;\n        dataObject['taskIds'] = [];\n        columns[`column-${i}`] = dataObject;\n        columnOrder.push(`column-${i}`);\n      }\n\n      const newState = { ...this.state,\n        columns: { ...this.state.columns,\n          ...columns\n        },\n        columnOrder: [...columnOrder]\n      };\n      this.setState(newState);\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"number\",\n      value: this.state.number,\n      onChange: this.changeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.clickHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Submit\"), React.createElement(DragDropContext, {\n      onDragEnd: this.onDragEnd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, this.state.columnOrder.map(columnId => {\n      const column = this.state.columns[columnId];\n      const tasks = column.taskIds.map(taskId => this.state.tasks[taskId]);\n      return React.createElement(Column, {\n        key: column.id,\n        column: column,\n        tasks: tasks,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      });\n    })), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, this.state.dataColumn.map(columnId => {\n      const column = this.state.columns[columnId];\n      const tasks = column.taskIds.map(taskId => this.state.tasks[taskId]);\n      return React.createElement(Column, {\n        key: column.id,\n        column: column,\n        tasks: tasks,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      });\n    }))));\n  }\n\n}\n\nexport default Board;","map":{"version":3,"sources":["/Users/wen/Desktop/Projects/React/dnd/src/Components/board.js"],"names":["React","Component","DragDropContext","initialData","Column","Board","state","onDragEnd","result","destination","source","draggableId","droppableId","index","start","columns","finish","column","newTaskIds","Array","from","taskIds","splice","newColumn","newState","id","setState","startTaskIds","newStart","finishTaskIds","newFinish","changeHandler","e","target","value","clickHandler","console","log","googlePlacesApi","process","env","REACT_APP_GOOGLE_PLACES_API_KEY","fetch","then","res","json","data","results","name","tasksFetched","i","length","taskObject","push","tasks","catch","error","columnsCount","number","columnOrder","dataObject","render","map","columnId","taskId","dataColumn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { DragDropContext } from 'react-beautiful-dnd';\n\nimport initialData from '../Store/initial-data';\nimport Column from './column';\n\nclass Board extends Component {\n\n    state = initialData;\n\n    onDragEnd = result => {\n        const { destination, source, draggableId } = result;\n\n        if (!destination) {\n            return;\n        }\n\n        if (\n            destination.droppableId === source.droppableId &&\n            destination.index === source.index\n        ) {\n            return;\n        }\n\n        const start = this.state.columns[source.droppableId];\n        const finish = this.state.columns[destination.droppableId];\n\n        //if moving within the same column\n        if (start === finish) {\n            const column = this.state.columns[source.droppableId];\n            const newTaskIds = Array.from(column.taskIds);\n            newTaskIds.splice(source.index, 1);\n            newTaskIds.splice(destination.index, 0, draggableId);\n\n            const newColumn = {\n                ...column,\n                taskIds: newTaskIds,\n            };\n\n            const newState = {\n                ...this.state,\n                columns: {\n                    ...this.state.columns,\n                    [newColumn.id]: newColumn,\n                },\n            };\n\n            this.setState(newState);\n            return;\n        }\n\n        //moving from one list to another\n        const startTaskIds = Array.from(start.taskIds);\n        startTaskIds.splice(source.index, 1);\n        const newStart = {\n            ...start,\n            taskIds: startTaskIds,\n        };\n\n        const finishTaskIds = Array.from(finish.taskIds);\n        finishTaskIds.splice(destination.index, 0, draggableId);\n        const newFinish = {\n            ...finish,\n            taskIds: finishTaskIds,\n        };\n\n\n        const newState = {\n            ...this.state,\n            columns: {\n                ...this.state.columns,\n                [newStart.id]: newStart,\n                [newFinish.id]: newFinish,\n            },\n        };\n\n        this.setState(newState);\n    };\n\n    changeHandler = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    };\n\n    clickHandler = () => {\n        console.log('hello');\n\n        // https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors \n        // added proxy in package.json \"proxy\": \"https://maps.googleapis.com/maps/api\"\n        const googlePlacesApi = process.env.REACT_APP_GOOGLE_PLACES_API_KEY;\n        fetch(`/place/textsearch/json?query=restaurants+hamburg+germany&key=${googlePlacesApi}`)\n            .then(res => res.json())\n            .then(data => {\n                console.log(data.results)\n                console.log(data.results[0].name);\n\n                var tasksFetched = {};\n                var taskIds = [];\n\n                for (var i = 0; i < data.results.length; i++) {\n                    var taskObject = {};\n                    taskObject['id'] = `task-${i}`;\n                    taskObject['content'] = data.results[i].name;\n                    console.log(taskObject);\n                    taskIds.push(`task-${i}`);\n                    tasksFetched[`task-${i}`] = taskObject;\n                }\n\n                const newState = {\n                    ...this.state,\n                    tasks: tasksFetched,\n                    columns: {\n                        ...this.state.columns,\n                        'data-1': {\n                            ...this.state.columns['data-1'],\n                            taskIds: taskIds\n\n                        }\n                    }\n                }\n\n                this.setState(newState);\n            })\n            .catch(error => console.error(error))\n\n        const columnsCount = this.state.number;\n\n        var columns = {};\n        var columnOrder = [];\n\n        for (var i = 0; i < columnsCount; i++) {\n            var dataObject = {};\n            dataObject['id'] = `column-${i}`;\n            dataObject['title'] = `column-${i}`;\n            dataObject['taskIds'] = [];\n\n            columns[`column-${i}`] = dataObject;\n            columnOrder.push(`column-${i}`);\n        }\n\n        const newState = {\n            ...this.state,\n            columns: {\n                ...this.state.columns,\n                ...columns,\n            },\n            columnOrder: [...columnOrder],\n        }\n\n        this.setState(newState);\n    };\n\n    render() {\n        return (\n            <div>\n                <input id='number' value={this.state.number} onChange={this.changeHandler}/>\n                <button onClick={this.clickHandler}>Submit</button>\n                <DragDropContext onDragEnd={this.onDragEnd}>\n                    <div className='container'>\n                        {this.state.columnOrder.map(columnId => {\n                            const column = this.state.columns[columnId];\n                            const tasks = column.taskIds.map(taskId => \n                                this.state.tasks[taskId]\n                            );\n\n                            return <Column key={column.id} column={column} tasks={tasks}/>\n                        })}\n                    </div>\n                    <div className='container'>\n                        {this.state.dataColumn.map(columnId => {\n                            const column = this.state.columns[columnId];\n                            const tasks = column.taskIds.map(taskId => \n                                this.state.tasks[taskId]\n                            );\n\n                            return <Column key={column.id} column={column} tasks={tasks}/>\n                        })}\n                    </div>\n                </DragDropContext>\n            </div>\n            \n        );\n    }\n}\n\nexport default Board;"]},"metadata":{},"sourceType":"module"}