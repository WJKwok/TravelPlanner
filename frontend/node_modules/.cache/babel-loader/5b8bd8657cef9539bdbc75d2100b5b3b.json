{"ast":null,"code":"var _jsxFileName = \"/Users/wen/Desktop/Projects/React/dnd/src/Components/board.js\";\nimport React, { useContext } from 'react';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport initialData from '../Store/initial-data';\nimport Column from './column';\nimport { PlaceContext } from '../Store/PlaceContext';\n\nfunction Board() {\n  const {\n    places,\n    dispatch\n  } = useContext(PlaceContext);\n  const [state, setState] = React.useState(initialData);\n\n  const onDragEnd = result => {\n    const {\n      destination,\n      source,\n      draggableId\n    } = result;\n\n    if (!destination) {\n      return;\n    }\n\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return;\n    }\n\n    const start = state.columns[source.droppableId];\n    const finish = state.columns[destination.droppableId]; //if moving within the same column\n\n    if (start === finish) {\n      const column = state.columns[source.droppableId];\n      const newplaceIds = Array.from(column.placeIds);\n      newplaceIds.splice(source.index, 1);\n      newplaceIds.splice(destination.index, 0, draggableId);\n      const newColumn = { ...column,\n        placeIds: newplaceIds\n      };\n      const newState = { ...state,\n        columns: { ...state.columns,\n          [newColumn.id]: newColumn\n        }\n      };\n      setState(newState);\n      return;\n    } //moving from one list to another\n\n\n    const startplaceIds = Array.from(start.placeIds);\n    startplaceIds.splice(source.index, 1);\n    const newStart = { ...start,\n      placeIds: startplaceIds\n    };\n    const finishplaceIds = Array.from(finish.placeIds);\n    finishplaceIds.splice(destination.index, 0, draggableId);\n    const newFinish = { ...finish,\n      placeIds: finishplaceIds\n    };\n    const newState = { ...state,\n      columns: { ...state.columns,\n        [newStart.id]: newStart,\n        [newFinish.id]: newFinish\n      }\n    };\n    setState(newState);\n  };\n\n  const changeHandler = e => {\n    setState({ ...state,\n      [e.target.id]: e.target.value\n    });\n  };\n\n  const clickHandler = async () => {\n    //setting number of columns\n    const columnsCount = state.number;\n    const location = state.place;\n    const type = state.type;\n    dispatch({\n      type: 'SHOW_PLACES',\n      search: {\n        type,\n        location\n      }\n    });\n    var columns = {};\n    var columnOrder = [];\n\n    for (var i = 0; i < columnsCount; i++) {\n      var dataObject = {};\n      dataObject['id'] = `column-${i}`;\n      dataObject['title'] = `Day ${i + 1}`;\n      dataObject['placeIds'] = [];\n      columns[`column-${i}`] = dataObject;\n      columnOrder.push(`column-${i}`);\n    } // https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors \n    // added proxy in package.json \"proxy\": \"https://maps.googleapis.com/maps/api\"\n\n\n    const googlePlacesApi = process.env.REACT_APP_GOOGLE_PLACES_API_KEY; // const place = state.place;\n    // const type = state.type;\n\n    const response = await fetch(`/place/textsearch/json?query=${type}+${location}&key=${googlePlacesApi}`);\n    const data = await response.json();\n    console.log(data.results);\n    var placesFetched = {};\n    var placeIds = [];\n\n    for (var j = 0; j < data.results.length; j++) {\n      //object structure of place card is set here\n      var placeObject = {};\n      placeObject['id'] = `place-${j}`;\n      placeObject['content'] = data.results[j].name;\n      placeObject['rating'] = data.results[j].rating;\n      placeObject['photoRef'] = data.results[j].photos ? data.results[j].photos[0].photo_reference : \"0\"; //console.log(placeObject);\n\n      placeIds.push(`place-${j}`);\n      placesFetched[`place-${j}`] = placeObject;\n    }\n\n    columns['data-1'] = { ...state.columns['data-1'],\n      placeIds: placeIds\n    };\n    const newState = { ...state,\n      places: placesFetched,\n      columns: { ...state.columns,\n        ...columns\n      },\n      columnOrder: [...columnOrder]\n    };\n    setState(newState);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    className: \"select-css\",\n    id: \"type\",\n    value: state.type,\n    onChange: changeHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"Restaurants\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"Restaurants\"), React.createElement(\"option\", {\n    value: \"Hotels\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Hotels\"), React.createElement(\"option\", {\n    value: \"Tourist+attraction\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"Tourist+attraction\")), React.createElement(\"input\", {\n    id: \"place\",\n    placeholder: \"City\",\n    type: \"text\",\n    value: state.place,\n    onChange: changeHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    id: \"number\",\n    placeholder: \"No. of Days\",\n    type: \"text\",\n    value: state.number,\n    onChange: changeHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: clickHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"Submit\")), React.createElement(DragDropContext, {\n    onDragEnd: onDragEnd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, state.columnOrder.map(columnId => {\n    const column = state.columns[columnId];\n    const places = column.placeIds.map(placeId => state.places[placeId]);\n    return React.createElement(Column, {\n      key: column.id,\n      column: column,\n      places: places,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    });\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, state.dataColumn.map(columnId => {\n    const column = state.columns[columnId];\n    const places = column.placeIds.map(placeId => state.places[placeId]);\n    return React.createElement(Column, {\n      key: column.id,\n      column: column,\n      places: places,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    });\n  }))));\n}\n\nexport default Board;","map":{"version":3,"sources":["/Users/wen/Desktop/Projects/React/dnd/src/Components/board.js"],"names":["React","useContext","DragDropContext","initialData","Column","PlaceContext","Board","places","dispatch","state","setState","useState","onDragEnd","result","destination","source","draggableId","droppableId","index","start","columns","finish","column","newplaceIds","Array","from","placeIds","splice","newColumn","newState","id","startplaceIds","newStart","finishplaceIds","newFinish","changeHandler","e","target","value","clickHandler","columnsCount","number","location","place","type","search","columnOrder","i","dataObject","push","googlePlacesApi","process","env","REACT_APP_GOOGLE_PLACES_API_KEY","response","fetch","data","json","console","log","results","placesFetched","j","length","placeObject","name","rating","photos","photo_reference","map","columnId","placeId","dataColumn"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { DragDropContext } from 'react-beautiful-dnd';\n\nimport initialData from '../Store/initial-data';\nimport Column from './column';\n\nimport { PlaceContext } from '../Store/PlaceContext';\n\nfunction Board() {\n\n    const { places, dispatch } = useContext(PlaceContext)\n    const [state, setState] = React.useState(initialData);\n\n    const onDragEnd = result => {\n        const { destination, source, draggableId } = result;\n\n        if (!destination) {\n            return;\n        }\n\n        if (\n            destination.droppableId === source.droppableId &&\n            destination.index === source.index\n        ) {\n            return;\n        }\n\n        const start = state.columns[source.droppableId];\n        const finish = state.columns[destination.droppableId];\n\n        //if moving within the same column\n        if (start === finish) {\n            const column = state.columns[source.droppableId];\n            const newplaceIds = Array.from(column.placeIds);\n            newplaceIds.splice(source.index, 1);\n            newplaceIds.splice(destination.index, 0, draggableId);\n\n            const newColumn = {\n                ...column,\n                placeIds: newplaceIds,\n            };\n\n            const newState = {\n                ...state,\n                columns: {\n                    ...state.columns,\n                    [newColumn.id]: newColumn,\n                },\n            };\n\n            setState(newState);\n            return;\n        }\n\n        //moving from one list to another\n        const startplaceIds = Array.from(start.placeIds);\n        startplaceIds.splice(source.index, 1);\n        const newStart = {\n            ...start,\n            placeIds: startplaceIds,\n        };\n\n        const finishplaceIds = Array.from(finish.placeIds);\n        finishplaceIds.splice(destination.index, 0, draggableId);\n        const newFinish = {\n            ...finish,\n            placeIds: finishplaceIds,\n        };\n\n\n        const newState = {\n            ...state,\n            columns: {\n                ...state.columns,\n                [newStart.id]: newStart,\n                [newFinish.id]: newFinish,\n            },\n        };\n\n        setState(newState);\n    };\n\n    const changeHandler = (e) => {\n        setState({\n            ...state,\n            [e.target.id]: e.target.value\n        })\n    };\n\n    const clickHandler = async () => {\n\n        //setting number of columns\n\n        const columnsCount = state.number;\n        const location = state.place;\n        const type = state.type;\n\n        dispatch({ type:'SHOW_PLACES', search: {type, location}});\n\n        var columns = {};\n        var columnOrder = [];\n\n        for (var i = 0; i < columnsCount; i++) {\n            var dataObject = {};\n            dataObject['id'] = `column-${i}`;\n            dataObject['title'] = `Day ${i + 1}`;\n            dataObject['placeIds'] = [];\n\n            columns[`column-${i}`] = dataObject;\n            columnOrder.push(`column-${i}`);\n        }\n\n        // https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors \n        // added proxy in package.json \"proxy\": \"https://maps.googleapis.com/maps/api\"\n        const googlePlacesApi = process.env.REACT_APP_GOOGLE_PLACES_API_KEY;\n        // const place = state.place;\n        // const type = state.type;\n\n        const response = await fetch(`/place/textsearch/json?query=${type}+${location}&key=${googlePlacesApi}`)\n        const data = await response.json();\n        \n        console.log(data.results)\n\n        var placesFetched = {};\n        var placeIds = [];\n        \n        for (var j = 0; j < data.results.length; j++) {\n\n            //object structure of place card is set here\n\n            var placeObject = {};\n            placeObject['id'] = `place-${j}`;\n            placeObject['content'] = data.results[j].name;\n            placeObject['rating'] = data.results[j].rating;\n            placeObject['photoRef'] = data.results[j].photos ? data.results[j].photos[0].photo_reference : \"0\";\n            //console.log(placeObject);\n            placeIds.push(`place-${j}`);\n            placesFetched[`place-${j}`] = placeObject;\n        \n        }\n\n        columns['data-1'] = {\n            ...state.columns['data-1'],\n            placeIds: placeIds\n        }\n        \n        const newState = {\n            ...state,\n            places: placesFetched,\n            columns: {\n                ...state.columns,\n                ...columns,\n            },\n            columnOrder: [...columnOrder],\n        }\n\n        setState(newState);\n    \n    };\n\n    return (\n        <div>\n            <div>\n                <select className=\"select-css\" id='type' value={state.type} onChange={changeHandler}>\n                    <option value=\"Restaurants\">Restaurants</option>\n                    <option value=\"Hotels\">Hotels</option>\n                    <option value=\"Tourist+attraction\">Tourist+attraction</option>\n                </select>\n                <input id='place' placeholder='City' type=\"text\" value={state.place} onChange={changeHandler}/>\n                <input id='number' placeholder='No. of Days' type=\"text\" value={state.number} onChange={changeHandler}/>\n                <button type='submit' onClick={clickHandler}>Submit</button>\n            </div>\n            <DragDropContext onDragEnd={onDragEnd}>\n                <div className='container'>\n                    {state.columnOrder.map(columnId => {\n                        const column = state.columns[columnId];\n                        const places = column.placeIds.map(placeId => \n                            state.places[placeId]\n                        );\n\n                        return <Column key={column.id} column={column} places={places}/>\n                    })}\n                </div>\n                <div className='container'>\n                    {state.dataColumn.map(columnId => {\n                        const column = state.columns[columnId];\n                        const places = column.placeIds.map(placeId => \n                            state.places[placeId]\n                        );\n\n                        return <Column key={column.id} column={column} places={places}/>\n                    })}\n                </div>\n            </DragDropContext>\n        </div>\n        \n    );\n\n}\n\nexport default Board;"]},"metadata":{},"sourceType":"module"}