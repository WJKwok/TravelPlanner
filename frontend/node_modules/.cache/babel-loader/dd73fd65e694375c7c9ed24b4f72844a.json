{"ast":null,"code":"const googlePlacesApi = process.env.REACT_APP_GOOGLE_PLACES_API_KEY;\nexport const fetchCategories = async (categories, city, dispatch) => {\n  dispatch({\n    type: \"LOAD_EMPTY_CATEGORY\",\n    payload: {\n      categories\n    }\n  });\n\n  for (var i = 0; i < categories.length; i++) {\n    // https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors \n    // added proxy in package.json \"proxy\": \"https://maps.googleapis.com/maps/api\"\n    const response = await fetch(`/place/textsearch/json?query=best+${categories[i]}+${city}&key=${googlePlacesApi}`);\n    const extraSuggestions = await response.json();\n    dispatch({\n      type: \"LOAD_CATEGORY\",\n      payload: {\n        extraSuggestions,\n        placeType: categories[i]\n      }\n    });\n  }\n};\nexport const fetchPlaceIdsDaybyDay = async (dayPlans, dispatch) => {\n  for (var i = 0; i < dayPlans.length; i++) {\n    let placesFetched = {};\n    const placeIds = dayPlans[i].placeIds;\n\n    for (var j = 0; j < placeIds.length; j++) {\n      const response = await fetch(`/place/details/json?placeid=${placeIds[j]}&key=${googlePlacesApi}`);\n      const placeData = await response.json();\n      let placeObject = {};\n      placeObject['id'] = placeIds[j];\n      placeObject['content'] = placeData.result.name;\n      placeObject['rating'] = placeData.result.rating;\n      placeObject['photoRef'] = placeData.result.photos ? placeData.result.photos[0].photo_reference : \"0\";\n      placeObject['location'] = placeData.result.geometry.location;\n      console.log(placeObject);\n      placesFetched[placeIds[j]] = placeObject;\n    }\n\n    dispatch({\n      type: \"LOAD_DAY_ITINERARY\",\n      payload: {\n        day: i,\n        placeIds,\n        dayPlacesFetched: placesFetched\n      }\n    });\n  }\n};\nexport const fetchPlaceIds = async dayPlans => {\n  let placesFetched = {};\n\n  for (var i = 0; i < dayPlans.length; i++) {\n    const placeIds = dayPlans[i].placeIds;\n\n    for (var j = 0; j < placeIds.length; j++) {\n      const response = await fetch(`/place/details/json?placeid=${placeIds[j]}&key=${googlePlacesApi}`);\n      const placeData = await response.json();\n      let placeObject = {};\n      placeObject['id'] = placeIds[j];\n      placeObject['content'] = placeData.result.name;\n      placeObject['rating'] = placeData.result.rating;\n      placeObject['photoRef'] = placeData.result.photos ? placeData.result.photos[0].photo_reference : \"0\";\n      placeObject['location'] = placeData.result.geometry.location;\n      console.log(placeObject);\n      placesFetched[placeIds[j]] = placeObject;\n    }\n  }\n\n  return placesFetched;\n};","map":{"version":3,"sources":["/Users/wen/Desktop/Projects/React/travelPlanner/frontend/src/Services/googlePlaceApi.js"],"names":["googlePlacesApi","process","env","REACT_APP_GOOGLE_PLACES_API_KEY","fetchCategories","categories","city","dispatch","type","payload","i","length","response","fetch","extraSuggestions","json","placeType","fetchPlaceIdsDaybyDay","dayPlans","placesFetched","placeIds","j","placeData","placeObject","result","name","rating","photos","photo_reference","geometry","location","console","log","day","dayPlacesFetched","fetchPlaceIds"],"mappings":"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","sourcesContent":["\nconst googlePlacesApi = process.env.REACT_APP_GOOGLE_PLACES_API_KEY;\n\nexport const fetchCategories = async (categories, city, dispatch) => {\n    \n    dispatch({ type:\"LOAD_EMPTY_CATEGORY\", payload:{categories}})\n\n    for (var i = 0; i < categories.length; i++){\n\n        // https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors \n        // added proxy in package.json \"proxy\": \"https://maps.googleapis.com/maps/api\"\n\n        const response = await fetch(`/place/textsearch/json?query=best+${categories[i]}+${city}&key=${googlePlacesApi}`)\n        const extraSuggestions = await response.json();\n\n        dispatch({ type:\"LOAD_CATEGORY\", payload:{extraSuggestions, placeType: categories[i]}})\n    }\n\n}\n\nexport const fetchPlaceIdsDaybyDay = async (dayPlans, dispatch) => {\n\n    for(var i = 0; i < dayPlans.length; i++) {\n        let placesFetched = {};\n        const placeIds = dayPlans[i].placeIds\n\n        for(var j = 0; j < placeIds.length; j++){\n            const response = await fetch(`/place/details/json?placeid=${placeIds[j]}&key=${googlePlacesApi}`)\n            const placeData = await response.json();\n\n            let placeObject = {};\n            placeObject['id'] = placeIds[j]\n            placeObject['content'] = placeData.result.name;\n            placeObject['rating'] = placeData.result.rating;\n            placeObject['photoRef'] = placeData.result.photos ? placeData.result.photos[0].photo_reference : \"0\";\n            placeObject['location'] = placeData.result.geometry.location;\n            \n            console.log(placeObject);\n            placesFetched[placeIds[j]] = placeObject;\n        }\n\n        dispatch({ type:\"LOAD_DAY_ITINERARY\", payload:{day: i, placeIds, dayPlacesFetched: placesFetched}})\n    }\n\n}\n\nexport const fetchPlaceIds = async (dayPlans) => {\n\n    let placesFetched = {};\n\n    for(var i = 0; i < dayPlans.length; i++) {\n        \n        const placeIds = dayPlans[i].placeIds\n\n        for(var j = 0; j < placeIds.length; j++){\n            const response = await fetch(`/place/details/json?placeid=${placeIds[j]}&key=${googlePlacesApi}`)\n            const placeData = await response.json();\n\n            let placeObject = {};\n            placeObject['id'] = placeIds[j]\n            placeObject['content'] = placeData.result.name;\n            placeObject['rating'] = placeData.result.rating;\n            placeObject['photoRef'] = placeData.result.photos ? placeData.result.photos[0].photo_reference : \"0\";\n            placeObject['location'] = placeData.result.geometry.location;\n            \n            console.log(placeObject);\n            placesFetched[placeIds[j]] = placeObject;\n        }\n\n    }\n\n    return placesFetched\n\n}"]},"metadata":{},"sourceType":"module"}