{"ast":null,"code":"var _jsxFileName = \"/Users/wen/Desktop/Projects/React/travelPlanner/dnd/src/Components/page.js\";\nimport React, { useContext } from 'react';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport DayBoard from './dayBoard';\nimport CategoryBoard from './categoryBoard';\nimport Form from './form';\nimport { PlaceContext } from '../Store/PlaceContext';\n\nfunction Page() {\n  const {\n    contextState,\n    dispatch\n  } = useContext(PlaceContext);\n  const {\n    loading,\n    data\n  } = useQuery(FETCH_USERS_QUERY);\n  console.log(data);\n\n  const onDragEnd = result => {\n    const {\n      destination,\n      source,\n      draggableId\n    } = result;\n\n    if (!destination) {\n      return;\n    }\n\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return;\n    }\n\n    const start = contextState.columns[source.droppableId];\n    const finish = contextState.columns[destination.droppableId]; //if moving within the same column\n\n    if (start === finish) {\n      const column = contextState.columns[source.droppableId];\n      const newplaceIds = Array.from(column.placeIds);\n      newplaceIds.splice(source.index, 1);\n      newplaceIds.splice(destination.index, 0, draggableId);\n      const newColumn = { ...column,\n        placeIds: newplaceIds\n      };\n      const newOrder = { ...contextState,\n        columns: { ...contextState.columns,\n          [newColumn.id]: newColumn\n        }\n      };\n      console.log(newOrder);\n      dispatch({\n        type: 'CHANGE_ORDER',\n        order: {\n          newOrder\n        }\n      });\n      return;\n    } //moving from one list to another\n\n\n    const startplaceIds = Array.from(start.placeIds);\n    startplaceIds.splice(source.index, 1);\n    const newStart = { ...start,\n      placeIds: startplaceIds\n    };\n    const finishplaceIds = Array.from(finish.placeIds);\n    finishplaceIds.splice(destination.index, 0, draggableId);\n    const newFinish = { ...finish,\n      placeIds: finishplaceIds\n    };\n    const newOrder = { ...contextState,\n      columns: { ...contextState.columns,\n        [newStart.id]: newStart,\n        [newFinish.id]: newFinish\n      }\n    };\n    console.log(newOrder);\n    dispatch({\n      type: 'CHANGE_ORDER',\n      order: {\n        newOrder\n      }\n    });\n  };\n\n  const addExtraDay = () => {\n    dispatch({\n      type: 'ADD_EXTRA_DAY'\n    });\n  };\n\n  const saveItinerary = () => {\n    const days = contextState.dayBoards;\n    let itinerary = [];\n\n    for (var i = 0; i < days.length; i++) {\n      itinerary.push(contextState.columns[days[i]].placeIds);\n    }\n\n    console.log(itinerary);\n  };\n\n  console.log(contextState);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), React.createElement(DragDropContext, {\n    onDragEnd: onDragEnd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"day-boards-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, contextState.dayBoards.map(columnId => {\n    const column = contextState.columns[columnId];\n    const places = column.placeIds.map(placeId => contextState.places[placeId]);\n    return React.createElement(DayBoard, {\n      key: column.id,\n      column: column,\n      places: places,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    });\n  }), contextState.dayBoards.length > 0 ? React.createElement(\"button\", {\n    className: \"extra-day\",\n    onClick: addExtraDay,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \"+\") : \"\"), React.createElement(\"button\", {\n    onClick: saveItinerary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Save Itinerary\"), React.createElement(\"div\", {\n    className: \"place-boards-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, contextState.categoryBoards.map(columnId => {\n    const column = contextState.columns[columnId];\n    const places = column.placeIds.map(placeId => contextState.places[placeId]);\n    return React.createElement(CategoryBoard, {\n      key: column.id,\n      column: column,\n      places: places,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    });\n  }))));\n}\n\nconst FETCH_USERS_QUERY = gql`\n{\n    getUsers{\n        id\n        username\n        email\n        createdAt\n    }\n}\n`;\nexport default Page;","map":{"version":3,"sources":["/Users/wen/Desktop/Projects/React/travelPlanner/dnd/src/Components/page.js"],"names":["React","useContext","DragDropContext","useQuery","gql","DayBoard","CategoryBoard","Form","PlaceContext","Page","contextState","dispatch","loading","data","FETCH_USERS_QUERY","console","log","onDragEnd","result","destination","source","draggableId","droppableId","index","start","columns","finish","column","newplaceIds","Array","from","placeIds","splice","newColumn","newOrder","id","type","order","startplaceIds","newStart","finishplaceIds","newFinish","addExtraDay","saveItinerary","days","dayBoards","itinerary","i","length","push","map","columnId","places","placeId","categoryBoards"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport DayBoard from './dayBoard';\nimport CategoryBoard from './categoryBoard';\nimport Form from './form';\n\nimport { PlaceContext } from '../Store/PlaceContext';\n\nfunction Page() {\n\n    const { contextState, dispatch } = useContext(PlaceContext);\n\n    const {\n        loading,\n        data\n    } = useQuery(FETCH_USERS_QUERY);\n\n    console.log(data);\n\n    const onDragEnd = result => {\n        const { destination, source, draggableId } = result;\n\n        if (!destination) {\n            return;\n        }\n\n        if (\n            destination.droppableId === source.droppableId &&\n            destination.index === source.index\n        ) {\n            return;\n        }\n\n        const start = contextState.columns[source.droppableId];\n        const finish = contextState.columns[destination.droppableId];\n\n        //if moving within the same column\n        if (start === finish) {\n            const column = contextState.columns[source.droppableId];\n            const newplaceIds = Array.from(column.placeIds);\n            newplaceIds.splice(source.index, 1);\n            newplaceIds.splice(destination.index, 0, draggableId);\n\n            const newColumn = {\n                ...column,\n                placeIds: newplaceIds,\n            };\n\n            const newOrder = {\n                ...contextState,\n                columns: {\n                    ...contextState.columns,\n                    [newColumn.id]: newColumn,\n                },\n            };\n            console.log(newOrder);\n            dispatch({ type:'CHANGE_ORDER', order: {newOrder}});\n            return;\n        }\n\n        //moving from one list to another\n        const startplaceIds = Array.from(start.placeIds);\n        startplaceIds.splice(source.index, 1);\n        const newStart = {\n            ...start,\n            placeIds: startplaceIds,\n        };\n\n        const finishplaceIds = Array.from(finish.placeIds);\n        finishplaceIds.splice(destination.index, 0, draggableId);\n        const newFinish = {\n            ...finish,\n            placeIds: finishplaceIds,\n        };\n\n\n        const newOrder = {\n            ...contextState,\n            columns: {\n                ...contextState.columns,\n                [newStart.id]: newStart,\n                [newFinish.id]: newFinish,\n            },\n        };\n\n        console.log(newOrder);\n        dispatch({ type:'CHANGE_ORDER', order: {newOrder}});\n    };\n\n    const addExtraDay = () => {\n        dispatch({type:'ADD_EXTRA_DAY'});\n    }\n\n    const saveItinerary = () => {\n        const days = contextState.dayBoards;\n        let itinerary = [];\n        for (var i = 0; i < days.length; i ++){\n            itinerary.push(contextState.columns[days[i]].placeIds);\n            \n        }\n        console.log(itinerary);\n    }\n\n    console.log(contextState);\n\n    return (\n        <div>\n            <Form/>\n            <DragDropContext onDragEnd={onDragEnd}>\n                <div className='day-boards-container'>\n                    {contextState.dayBoards.map(columnId => {\n                        const column = contextState.columns[columnId];\n                        const places = column.placeIds.map(placeId => \n                            contextState.places[placeId]\n                        );\n\n                        return <DayBoard key={column.id} column={column} places={places}/>\n                    })}\n                    {contextState.dayBoards.length > 0 ? <button className=\"extra-day\" onClick={addExtraDay}>+</button> : \"\"}\n                    \n                </div>\n                <button onClick={saveItinerary}>Save Itinerary</button>\n                <div className='place-boards-container'>\n                    {contextState.categoryBoards.map(columnId => {\n                        const column = contextState.columns[columnId];\n                        const places = column.placeIds.map(placeId => \n                            contextState.places[placeId]\n                        );\n\n                        return <CategoryBoard key={column.id} column={column} places={places}/>\n                    })}\n                </div>\n            </DragDropContext>\n        </div>\n        \n    );\n\n}\n\nconst FETCH_USERS_QUERY = gql`\n{\n    getUsers{\n        id\n        username\n        email\n        createdAt\n    }\n}\n`\n\nexport default Page;\n"]},"metadata":{},"sourceType":"module"}