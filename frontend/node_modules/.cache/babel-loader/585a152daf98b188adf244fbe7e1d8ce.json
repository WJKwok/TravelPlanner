{"ast":null,"code":"import initialData from './initial-data';\nexport const placeReducer = (state, action) => {\n  switch (action.type) {\n    case 'CLEAR_STATE':\n      console.log('clearing state...');\n      console.log('cleared state: ', initialData);\n      const clearedState = clearState(); //WHY can't i return initialData?\n      //return initialData\n\n      return clearedState;\n\n    case 'LOAD_EMPTY_DAYS':\n      console.log('before dayboards loaded places length: ', Object.keys(state.places).length);\n      const {\n        numberOfDays,\n        city\n      } = action.payload;\n      const emptyDaysLoaded = loadEmptyDays(state, numberOfDays, city);\n      console.log('dayboards loaded places length: ', Object.keys(emptyDaysLoaded.places).length);\n      return emptyDaysLoaded;\n\n    case 'LOAD_DAY_ITINERARY':\n      const {\n        day,\n        placeIds,\n        dayPlacesFetched\n      } = action.payload;\n      const dayItineraryLoaded = loadDayItinerary(state, day, placeIds, dayPlacesFetched);\n      return dayItineraryLoaded;\n\n    case 'LOAD_ENTIRE_ITINERARY':\n      const {\n        itinerary,\n        placesFetched\n      } = action.payload;\n      const itineraryLoaded = loadEntireItinerary(state, itinerary, placesFetched);\n      return itineraryLoaded;\n    // Load empty category to give it a skeleton, else if you drag without everything having loaded it will cause issue\n\n    case 'LOAD_EMPTY_CATEGORY':\n      const {\n        categories\n      } = action.payload;\n      const emptyCategoriesLoaded = loadEmptyCategories(state, categories);\n      console.log(\"emptyCategoriesLoaded:\", emptyCategoriesLoaded);\n      return emptyCategoriesLoaded;\n\n    case 'LOAD_CATEGORY':\n      const {\n        extraSuggestions,\n        placeType\n      } = action.payload;\n      const categoryLoaded = loadCategory(state, extraSuggestions, placeType);\n      return categoryLoaded;\n\n    case 'ADD_SEARCH_ITEM':\n      const {\n        placeObject\n      } = action.payload;\n      const addedItem = addItem(state, placeObject);\n      console.log('reducer: ', addedItem);\n      return addedItem;\n\n    case 'ADD_EXTRA_DAY':\n      const extraDay = addExtraDay(state);\n      return extraDay;\n\n    case 'CHANGE_ORDER':\n      const {\n        newOrder\n      } = action.order;\n      return newOrder;\n\n    default:\n      return state;\n  }\n};\n\nconst clearState = () => {\n  const newState = {\n    itineraryId: \"\",\n    places: {},\n    days: 0,\n    location: \"Berlin\",\n    columns: {\n      'searched-items': {\n        id: 'searched-items',\n        title: 'Searched Items',\n        placeIds: []\n      }\n    },\n    categoryBoards: [],\n    dayBoards: [],\n    searchBoard: ['searched-items']\n  };\n  return newState;\n};\n\nconst addItem = (state, placeObject) => {\n  const newState = { ...state,\n    places: { ...state.places,\n      [placeObject.id]: placeObject\n    },\n    columns: { ...state.columns,\n      'searched-items': { ...state.columns['searched-items'],\n        placeIds: [...state.columns['searched-items'].placeIds, placeObject.id]\n      }\n    }\n  };\n  return newState;\n};\n\nconst loadEmptyDays = (state, numberOfDays, city) => {\n  let columns = {};\n  let dayBoards = [];\n\n  for (var i = 0; i < numberOfDays; i++) {\n    let dayObject = {};\n    dayObject['id'] = `day-${i}`;\n    dayObject['title'] = `Day ${i + 1}`;\n    dayObject['placeIds'] = [];\n    columns[`day-${i}`] = dayObject;\n    dayBoards.push(`day-${i}`);\n  }\n\n  const newState = { ...state,\n    days: numberOfDays,\n    location: city,\n    columns: { ...state.columns,\n      ...columns\n    },\n    dayBoards: [...dayBoards]\n  };\n  return newState;\n};\n\nconst loadDayItinerary = (state, day, placeIds, placesFetched) => {\n  let dayColumn = state.columns[`day-${day}`];\n  dayColumn.placeIds = placeIds;\n  const newState = { ...state,\n    places: { ...state.places,\n      ...placesFetched\n    },\n    columns: { ...state.columns,\n      dayColumn\n    }\n  };\n  return newState;\n};\n\nconst loadEntireItinerary = (state, itinerary, placesFetched) => {\n  let columns = {};\n  let dayBoards = [];\n  const dayPlans = itinerary.dayPlans;\n\n  for (var i = 0; i < dayPlans.length; i++) {\n    let dayObject = {};\n    dayObject['id'] = `day-${i}`;\n    dayObject['title'] = `Day ${i + 1}`;\n    dayObject['placeIds'] = [];\n    columns[`day-${i}`] = dayObject;\n    dayBoards.push(`day-${i}`);\n  }\n\n  for (var i = 0; i < dayPlans.length; i++) {\n    const placeIds = dayPlans[i].placeIds;\n    columns[`day-${i}`].placeIds = placeIds;\n  }\n\n  const newState = { ...state,\n    itineraryId: itinerary.id,\n    places: placesFetched,\n    columns: { ...state.columns,\n      ...columns\n    }\n  };\n  return newState;\n};\n\nconst loadEmptyCategories = (state, categories) => {\n  let columns = {};\n  let categoryBoards = [];\n\n  for (var i = 0; i < categories.length; i++) {\n    let categoryObject = {};\n    categoryObject['id'] = `category-${categories[i]}`;\n    categoryObject['title'] = `${categories[i]}`;\n    categoryObject['placeIds'] = [];\n    columns[`category-${categories[i]}`] = categoryObject;\n    categoryBoards.push(`category-${categories[i]}`);\n  }\n\n  const newState = { ...state,\n    columns: { ...state.columns,\n      ...columns\n    },\n    categoryBoards: categoryBoards\n  };\n  return newState;\n};\n\nconst loadCategory = (state, extraSuggestions, placeType) => {\n  //console.log('hello from reducer: ', extraSuggestions)\n  let placesFetched = {};\n  let newColumn = {};\n  let data = extraSuggestions;\n  let placeIds = [];\n  console.log(\"check data result length: \", data.results);\n\n  for (var j = 0; j < data.results.length; j++) {\n    //remove duplicate data from category boards\n    if (data.results[j].place_id in placesFetched) {\n      continue;\n    }\n\n    var placeObject = {};\n    placeObject['id'] = data.results[j].place_id;\n    placeObject['content'] = data.results[j].name;\n    placeObject['rating'] = data.results[j].rating;\n    placeObject['photoRef'] = data.results[j].photos ? data.results[j].photos[0].photo_reference : \"0\";\n    placeObject['location'] = data.results[j].geometry.location; //console.log(placeObject);\n\n    placeIds.push(data.results[j].place_id);\n    placesFetched[data.results[j].place_id] = placeObject;\n  }\n\n  newColumn[`category-${placeType}`] = {\n    id: `category-${placeType}`,\n    title: `${placeType}`,\n    placeIds: placeIds\n  };\n  const newState = { ...state,\n    places: { ...state.places,\n      ...placesFetched\n    },\n    columns: { ...state.columns,\n      ...newColumn\n    }\n  };\n  console.log(newState);\n  return newState;\n};\n\nconst addExtraDay = state => {\n  const nextColumnIndex = state.dayBoards.length;\n  const nextColumn = {\n    id: `day-${nextColumnIndex}`,\n    title: `Day ${nextColumnIndex + 1}`,\n    placeIds: []\n  };\n  const newState = { ...state,\n    days: nextColumnIndex + 1,\n    columns: { ...state.columns,\n      [`day-${nextColumnIndex}`]: nextColumn\n    },\n    dayBoards: [...state.dayBoards, `day-${nextColumnIndex}`]\n  };\n  console.log(newState);\n  return newState;\n};","map":{"version":3,"sources":["/Users/wen/Desktop/Projects/React/travelPlanner/frontend/src/Store/placeReducer.js"],"names":["initialData","placeReducer","state","action","type","console","log","clearedState","clearState","Object","keys","places","length","numberOfDays","city","payload","emptyDaysLoaded","loadEmptyDays","day","placeIds","dayPlacesFetched","dayItineraryLoaded","loadDayItinerary","itinerary","placesFetched","itineraryLoaded","loadEntireItinerary","categories","emptyCategoriesLoaded","loadEmptyCategories","extraSuggestions","placeType","categoryLoaded","loadCategory","placeObject","addedItem","addItem","extraDay","addExtraDay","newOrder","order","newState","itineraryId","days","location","columns","id","title","categoryBoards","dayBoards","searchBoard","i","dayObject","push","dayColumn","dayPlans","categoryObject","newColumn","data","results","j","place_id","name","rating","photos","photo_reference","geometry","nextColumnIndex","nextColumn"],"mappings":"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","sourcesContent":["import initialData from './initial-data';\n\nexport const placeReducer = (state, action) => {\n    switch (action.type) {\n        case 'CLEAR_STATE':\n            console.log('clearing state...')\n            console.log('cleared state: ', initialData)\n            const clearedState = clearState()\n            //WHY can't i return initialData?\n            //return initialData\n            return clearedState;\n        case 'LOAD_EMPTY_DAYS':\n            console.log('before dayboards loaded places length: ', Object.keys(state.places).length)\n            const { numberOfDays, city } = action.payload\n            const emptyDaysLoaded = loadEmptyDays(state, numberOfDays, city)\n            console.log('dayboards loaded places length: ', Object.keys(emptyDaysLoaded.places).length)\n            return emptyDaysLoaded\n        case 'LOAD_DAY_ITINERARY':\n            const { day, placeIds, dayPlacesFetched } = action.payload\n            const dayItineraryLoaded = loadDayItinerary(state, day, placeIds, dayPlacesFetched)\n            return dayItineraryLoaded\n        case 'LOAD_ENTIRE_ITINERARY':\n            const { itinerary, placesFetched } = action.payload\n            const itineraryLoaded = loadEntireItinerary(state, itinerary, placesFetched)\n            return itineraryLoaded\n        // Load empty category to give it a skeleton, else if you drag without everything having loaded it will cause issue\n        case 'LOAD_EMPTY_CATEGORY':\n            const { categories } = action.payload\n            const emptyCategoriesLoaded = loadEmptyCategories(state, categories)\n            console.log(\"emptyCategoriesLoaded:\", emptyCategoriesLoaded)\n            return emptyCategoriesLoaded\n        case 'LOAD_CATEGORY':\n            const { extraSuggestions, placeType} = action.payload\n            const categoryLoaded = loadCategory(state, extraSuggestions, placeType)\n            return categoryLoaded;\n        case 'ADD_SEARCH_ITEM':\n            const { placeObject } = action.payload\n            const addedItem = addItem(state, placeObject)\n            console.log('reducer: ', addedItem);\n            return addedItem;\n        case 'ADD_EXTRA_DAY':\n            const extraDay = addExtraDay(state);\n            return extraDay;\n        case 'CHANGE_ORDER':\n            const { newOrder } = action.order;\n            return newOrder;\n        default:\n            return state;\n    }\n}\n\nconst clearState = () => {\n    const newState = {\n        itineraryId: \"\",\n        places: {},\n        days: 0,\n        location: \"Berlin\",\n        columns: {\n            'searched-items': {\n                id:'searched-items',\n                title: 'Searched Items',\n                placeIds: []\n            }\n        },\n        categoryBoards: [],\n        dayBoards: [],\n        searchBoard: ['searched-items']\n    }\n\n    return newState;\n}\n\nconst addItem = (state, placeObject) => {\n    const newState = {\n        ...state,\n        places: {\n            ...state.places,\n            [placeObject.id]: placeObject\n        },\n        columns: {\n            ...state.columns,\n            'searched-items': {\n                ...state.columns['searched-items'],\n                placeIds: [...state.columns['searched-items'].placeIds, placeObject.id]\n            }\n        }\n    }\n\n    return newState\n}\n\nconst loadEmptyDays = (state, numberOfDays, city) => {\n    let columns = {};\n    let dayBoards = [];\n\n    for (var i = 0; i < numberOfDays; i++) {\n        let dayObject = {};\n        dayObject['id'] = `day-${i}`;\n        dayObject['title'] = `Day ${i + 1}`;\n        dayObject['placeIds'] = [];\n\n        columns[`day-${i}`] = dayObject;\n        dayBoards.push(`day-${i}`);\n    }\n\n    const newState = {\n        ...state,\n        days: numberOfDays,\n        location: city,\n        columns: {\n            ...state.columns,\n            ...columns,\n        },\n        dayBoards: [...dayBoards],\n    }\n\n    return newState\n}\n\nconst loadDayItinerary = (state, day, placeIds, placesFetched) => {\n\n    let dayColumn = state.columns[`day-${day}`];\n    dayColumn.placeIds = placeIds\n\n    const newState = {\n        ...state,\n        places: {\n            ...state.places,\n            ...placesFetched\n        },\n        columns: {\n            ...state.columns,\n            dayColumn,\n        },\n    }\n\n    return newState\n}\n\nconst loadEntireItinerary = (state, itinerary, placesFetched) => {\n\n    let columns = {};\n    let dayBoards = [];\n\n    const dayPlans = itinerary.dayPlans;\n\n    for (var i = 0; i < dayPlans.length; i++) {\n        let dayObject = {};\n        dayObject['id'] = `day-${i}`;\n        dayObject['title'] = `Day ${i + 1}`;\n        dayObject['placeIds'] = [];\n\n        columns[`day-${i}`] = dayObject;\n        dayBoards.push(`day-${i}`);\n    }\n\n    for(var i = 0; i < dayPlans.length; i++) {\n        const placeIds = dayPlans[i].placeIds\n        columns[`day-${i}`].placeIds = placeIds\n    }\n\n    const newState = {\n        ...state,\n        itineraryId: itinerary.id,\n        places: placesFetched,\n        columns: {\n            ...state.columns,\n            ...columns,\n        },\n    }\n\n    return newState\n}\n\nconst loadEmptyCategories = (state, categories) => {\n    let columns = {};\n    let categoryBoards = [];\n\n    for (var i = 0; i < categories.length; i++) {\n        let categoryObject = {};\n        categoryObject['id'] = `category-${categories[i]}`;\n        categoryObject['title'] = `${categories[i]}`;\n        categoryObject['placeIds'] = [];\n\n        columns[`category-${categories[i]}`] = categoryObject;\n        categoryBoards.push(`category-${categories[i]}`)\n    }\n\n    const newState = {\n        ...state,\n        columns: {\n            ...state.columns,\n            ...columns,\n        },\n        categoryBoards: categoryBoards,\n    }\n\n    return newState\n}\n\nconst loadCategory = (state, extraSuggestions, placeType) => {\n\n    //console.log('hello from reducer: ', extraSuggestions)\n    let placesFetched = {}\n    let newColumn = {};\n\n    let data = extraSuggestions;\n    let placeIds = [];\n\n    console.log(\"check data result length: \", data.results)\n\n    for (var j = 0; j < data.results.length; j++) {\n\n        //remove duplicate data from category boards\n        if(data.results[j].place_id in placesFetched){\n            continue;\n        }\n\n        var placeObject = {};\n        placeObject['id'] = data.results[j].place_id;\n        placeObject['content'] = data.results[j].name;\n        placeObject['rating'] = data.results[j].rating;\n        placeObject['photoRef'] = data.results[j].photos ? data.results[j].photos[0].photo_reference : \"0\";\n        placeObject['location'] = data.results[j].geometry.location;\n        \n        //console.log(placeObject);\n        placeIds.push(data.results[j].place_id);\n        placesFetched[data.results[j].place_id] = placeObject;\n    \n    }\n    \n    newColumn[`category-${placeType}`] = {\n        id: `category-${placeType}`,\n        title: `${placeType}`,\n        placeIds: placeIds\n    }\n\n\n    const newState = {\n        ...state,\n        places: {\n            ...state.places,\n            ...placesFetched\n        },\n        columns: {\n            ...state.columns,\n            ...newColumn,\n        },\n    }\n\n    console.log(newState)\n    return newState;\n}\n\nconst addExtraDay = (state) => {\n\n    const nextColumnIndex = state.dayBoards.length;\n    const nextColumn = {\n        id: `day-${nextColumnIndex}`, \n        title: `Day ${nextColumnIndex + 1}`, \n        placeIds: []\n    }\n\n    const newState = {\n        ...state,\n        days: nextColumnIndex + 1,\n        columns: {\n            ...state.columns,\n            [`day-${nextColumnIndex}`]: nextColumn\n        },\n        dayBoards: [...state.dayBoards, `day-${nextColumnIndex}`],\n    }\n\n    console.log(newState);\n    return newState\n}\n"]},"metadata":{},"sourceType":"module"}